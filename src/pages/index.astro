---
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
import PostCard from "../components/PostCard.astro";

const posts = await getCollection("posts", ({ data }) => {
  return import.meta.env.DEV || !data.draft;
});

const sortedPosts = posts.sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<BaseLayout
  title="sobrecoisas"
  description="Um blog sobre coisas"
  isHomePage={true}
>
  <section class="space-y-8">
    {sortedPosts.map((post) => <PostCard post={post} />)}
  </section>
</BaseLayout>
